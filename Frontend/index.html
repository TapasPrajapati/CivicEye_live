<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CivicEye - Emergency Reporting System</title>
  <link rel="stylesheet" href="./landing/style.css" />
  <link rel="stylesheet" href="./landing/loginanimation.css">
  <link rel="stylesheet" href="./landing/profile-dropdown.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="./landing/auth_passing.js"></script>
  <script src="./landing/profile-dropdown.js"></script>
  <script src="./landing/main.js"></script>
</head>

<body>
  <!-- Sidebar -->
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <button class="close-btn" id="closeNav">
        <i data-lucide="chevron-left"></i>
      </button>
      <div class="logo">
        <i data-lucide="shield-alert"></i>
        <span>CivicEye</span>
      </div>
    </div>
    <ul class="nav-links">
      <li>
        <a href="/Frontend/landing/index.html" class="active">
          <i data-lucide="home"></i>
          <span>Home</span>
        </a>
      </li>
      <li>
        <a href="/Frontend/Dashboard/dashboard.html" class="active">
          <i data-lucide="layout-dashboard"></i>
          <span>Dashboard</span>
        </a>
      </li>
      <li>
        <a href="/Frontend/report/report.html" class="active">
          <i data-lucide="file-text"></i>
          <span>Report Case</span>
        </a>
      </li>
      <li>
        <a href="/Frontend/Track_case/track.html" class="active">
          <i data-lucide="search"></i>
          <span>Track Case</span>
        </a>
      </li>
      <li>
        <a href="/Frontend/Emergency/emergency.html" class="active">
          <i data-lucide="phone"></i>
          <span>Emergency Contacts</span>
        </a>
      </li>
      <li>
        <a href="/Frontend/help_guide/help.html" class="active">
          <i data-lucide="help-circle"></i>
          <span>Help Guide</span>
        </a>
      </li>
      <li>
        <a href="/Frontend/safety-tips/safety.html" class="active">
          <i data-lucide="shield"></i>
          <span>Safety Tips</span>
        </a>
      </li>

      <li>
        <a href="/Frontend/Contact/contact.html"><i data-lucide="phone"></i>Contact</a>
      </li>
    </ul>

    <div class="emergency-section">
      <div class="emergency-title">
        <i data-lucide="phone-call"></i>
        <span>Emergency Numbers</span>
      </div>
      <div class="emergency-numbers">
        <a href="tel:100" class="emergency-item" style="color: #ffff; text-decoration: none">
          <span class="service">Police</span>
          <span class="number">100</span>
        </a>

        <a href="tel:1091" class="emergency-item" style="color: #ffff; text-decoration: none">
          <span class="service">Women Helpline</span>
          <span class="number">1091</span>
        </a>
        <a href="tel:108" class="emergency-item" style="color: #ffff; text-decoration: none">
          <span class="service">Ambulance</span>
          <span class="number">108</span>
        </a>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Top Nav -->
    <header class="top-nav">
      <div class="nav-left">
        <button class="menu-btn" id="openNav">
          <i data-lucide="menu"></i>
        </button>
        <div class="brand" onclick="window.location.href='/Frontend/landing/index.html'" style="cursor: pointer">
          <i data-lucide="shield-alert"></i>
          <span>CivicEye</span>
        </div>
      </div>
      <div class="nav-right">
        <a href="tel:112" style="color: #ffff; text-decoration: none">
          <button class="btn btn-emergency">
            <i data-lucide="phone-call"></i>
            Emergency
          </button>
        </a>
        <button id="openLoginBtn" class="btn btn-login">Login</button>
        <button id="showLogin" class="btn btn-signup">Register</button>
        <div id="profileSection" style="display: none">
          <button id="profileBtn" class="btn btn-profile">
            <i data-lucide="user"></i>
          </button>
        </div>
      </div>
    </header>

    <!-- Alert Banner -->
    <div class="alert-banner">
      <div class="alert-content">
        <i data-lucide="alert-triangle"></i>
        <div class="alert-text">
          <h3>Immediate Action Required</h3>
          <p>Quick online reporting can save lives. Report incidents immediately.</p>
        </div>
      </div>
      <button class="btn btn-report" onclick="window.location.href='./report/report.html'">
        <i data-lucide="file-plus"></i>Report Now
      </button>
    </div>

    <div class="dashboard-grid">
      <!-- Quick Actions -->
      <section class="quick-actions">
        <h2>Quick Actions</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="window.location.href='./Dashboard/dashboard.html'"><i data-lucide="layout-dashboard"></i><span>Dashboard</span></button>
          <button class="action-btn" onclick="window.location.href='./Track_case/track.html'"><i data-lucide="search"></i><span>Track Case</span></button>
          <button class="action-btn" onclick="window.location.href='./Emergency/emergency.html'"><i data-lucide="phone"></i><span>Emergency</span></button>
          <button class="action-btn" onclick="window.location.href='https://www.google.com/maps/search/police+stations+near+me'"><i data-lucide="map-pin"></i><span>Nearby Station</span></button>
        </div>
      </section>

      <!-- Stats -->
      <section class="statistics-section">
        <div class="stat-grid">
          <div class="stat-card"><div class="stat-icon" style="background:rgba(59,130,246,0.1)"><i data-lucide="file-text" style="color:#3b82f6"></i></div><div class="stat-info"><h3>Total Cases</h3><p class="stat-number">2,045</p></div></div>
          <div class="stat-card"><div class="stat-icon" style="background:rgba(16,185,129,0.1)"><i data-lucide="check-circle" style="color:#10b981"></i></div><div class="stat-info"><h3>Solved Cases</h3><p class="stat-number">1,045</p></div></div>
          <div class="stat-card"><div class="stat-icon" style="background:rgba(245,158,11,0.1)"><i data-lucide="clock" style="color:#f59e0b"></i></div><div class="stat-info"><h3>Pending Cases</h3><p class="stat-number">1,000</p></div></div>
          <div class="stat-card"><div class="stat-icon" style="background:rgba(139,92,246,0.1)"><i data-lucide="trending-up" style="color:#8b5cf6"></i></div><div class="stat-info"><h3>This Year</h3><p class="stat-number">500</p></div></div>
        </div>
      </section>

      <!-- News -->
      <section class="news-section">
        <h2>Latest News</h2>
        <div class="news-container">
          <div class="news-ticker" id="news-ticker"></div>
        </div>
      </section>

      <!-- Map -->
      <section class="map-section">
        <h2>Current User Location</h2>
        <div class="map-container">
          <iframe id="mapIframe" src="https://maps.google.com/maps?q=28.1234,77.1234&z=15&output=embed" allowfullscreen loading="lazy"></iframe>
        </div>
      </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Emergency Contacts</h3>
          <ul>
            <li><a href="tel:100">Police: 100</a></li>
            <li><a href="tel:1091">Women's Helpline: 1091</a></li>
            <li><a href="tel:108">Ambulance: 108</a></li>
            <li><a href="tel:1098">Child Helpline: 1098</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="./report/report.html">Report Case</a></li>
            <li><a href="./Track_case/track.html">Track Case</a></li>
            <li><a href="./safety-tips/safety.html">Safety Tips</a></li>
            <li><a href="./Contact/contact.html">Contact</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Connect With Us</h3>
          <ul>
            <li><a href="#">Twitter</a></li>
            <li><a href="#">Facebook</a></li>
            <li><a href="#">Instagram</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>Â© 2024 CivicEye. All rights reserved.</p>
      </div>
    </footer>
  </main>

  <script src="./landing/Access.js"></script>
  <script>
    async function loadNews() {
      try {
        const res = await fetch("https://civiceye-4-q1te.onrender.com/api/news/crime-news");
        const data = await res.json();
        const ticker = document.getElementById("news-ticker");
        ticker.innerHTML = "";

        if (data.articles && data.articles.length > 0) {
          data.articles.slice(0, 5).forEach(article => {
            const div = document.createElement("div");
            div.className = "ticker-headline";
            div.innerHTML = `
              <span class="breaking-news">${article.isBreaking ? "BREAKING:" : "NEWS:"}</span>
              <span class="headline-text">
                <a href="${article.url}" target="_blank" style="color:inherit;text-decoration:none;">
                  ${article.title}
                </a>
              </span>
              <span class="source"> - ${article.source || "Unknown Source"}</span>
              <span class="time"> (${new Date(article.publishedAt).toLocaleDateString()})</span>
            `;
            ticker.appendChild(div);
          });
        } else {
          ticker.innerHTML = "<p>No news available</p>";
        }
      } catch (err) {
        console.error("Failed to load news:", err);
        document.getElementById("news-ticker").innerHTML = "<p>Unable to load news</p>";
      }
    }
    loadNews();
  </script>
</body>
</html>
